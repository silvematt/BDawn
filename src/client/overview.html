<!DOCTYPE html>
<html>

<head>
    <title>BDawn - Web Client - Login</title>
    <script>
      function OnOverview() 
      {
        alert("ON OVERVIEW");
          var request = new XMLHttpRequest();
          request.onreadystatechange = function() 
          {
              if (this.readyState == 4) 
              {
                  var res = JSON.parse(this.responseText);
                  
                  //alert(localStorage.getItem("bdawn_sess_tkn"));
                  
                  const resLabel = document.getElementById('ResultLabel');
                  
                  // Cover all cases
                  switch(res.rMessage)
                  {
                        case "TOKEN_INVALID":
                            alert("Session expired.");
                            location.href = "http://localhost:3000/cLogin";
                            break;

                        case "CHARACTER_NOT_CREATED":
                            location.href = "http://localhost:3000/cCharacterCreation";
                            break;

                        case "OK":
                            // Take everything and fill the page
                            break;

                        default:
                        alert("Session expired.");
                            location.href = "http://localhost:3000/cLogin";
                            break;
                  }
              }
          };

          var session = localStorage.getItem("bdawn_sess_tkn")
          request.open('POST', 'http://localhost:3000/overview');
          request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
          request.send(`tkn=${session}`);
        }

        window.onload = function()
        {
            OnOverview();
        };
    </script>
</head>

<body>

  
    <div class = "precont">
        <h1>BDawn - Web Client</h1>
        <h2>Overview</h2>
    </div>
</body>
</html>